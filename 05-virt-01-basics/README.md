
# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."


## Как сдавать задания

Обязательными к выполнению являются задачи без указания звездочки. Их выполнение необходимо для получения зачета и диплома о профессиональной переподготовке.

Задачи со звездочкой (*) являются дополнительными задачами и/или задачами повышенной сложности. Они не являются обязательными к выполнению, но помогут вам глубже понять тему.

Домашнее задание выполните в файле readme.md в github репозитории. В личном кабинете отправьте на проверку ссылку на .md-файл в вашем репозитории.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.
> Решение.
> В случае полной (аппаратной) виртуализации и паравиртуализации присутствует гипервизор для управления ВМ, при этом железо внутри ВМ эмулируется гипервизором. Приложения внутри таких ВМ "понимают", что они работают внутри ВМ из-за эмулированного железа. Отличие здесь - что при полной виртуализации не нужна ОС на физической машине - ее роль выполняет сам гипервизор. При паравиртуализации ОС требуется для хостовой машины. 
> 
> В случае же виртуализации на основе ОС гипервизор отсутствует как таковой. При виртуализации на основе ОС сама ОС создает отдельные пространства пользователя (контейнеры), которые изолированы друг от друга, и с точки зрения приложений внутри этих контейнеров каждый такой контейнер является изолированным сервером. При виртуализации на основе ОС в контейнере приложения "думают", что они работают с реальным железом хостовой машины без эмуляции гипервизора.

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.
> Решение. 
> - Высоконагруженная база данных, чувствительная к отказу - физические сервера, т.к. важны скорости чтения/записи к дискам (IOPS), а также максимальная надежность и минимум ПО.
> - Различные web-приложения - виртуализация уровня ОС, т.к. нужно сосредоточится на коде самого web-приложения в контейнере, а не плодить отдельные инстансы ВМ со своими гостевыми ОС и эмулированным железом.
> - Windows системы для использования бухгалтерским отделом - здесь лучше подойдет паравиртуализация, т.к. важны изоляция гостевых ОС с клиентами 1С, а также возможность создания снимков целиком гостевой ОС с настройками прикладного ПО (для цели резервного копирования).
> - Системы, выполняющие высокопроизводительные расчеты на GPU - физические сервера, а также возможно использовать паравиртуализацию в совместимой гостевой ОС в случае возможности прямого проброса видеокарты GPU в ВМ. Но у физических серверов здесь явный перевес из-за отсутствия гипервизоров как единой точки отказа и замедления расчетов. 

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
   > Решение. Для такого большого количества ВМ требуется уже Enterprise уровень системы управления виртуализацией. И т.к. преимущественно будет Windows based, то выбираю Microsoft Windows Hyper-V. Хотя можно выбрать и VMWare vSphere, если есть много денег.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
   > Решение. Однозначно KVM, т.к. поддержка ВМ Windows в нем реализована лучше, чем в Xen, а также KVM производительнее Xen.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
   > Решение. Думаю лучше подойдет Oracle VirtualBox под хостовую ОС Windows из соображений максимальной совместимости с ВМ Windows. Также можно предложить бесплатный узкоспециализированный гипервизор-ОС Microsoft Hyper-V Server (который без GUI)
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.
   > Решение. Думаю Docker подойдет в самый раз. Хотя можно использовать абсолютно любую систему управления виртуализацией для данного случая. 
 

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.
> Решение. Основные проблемы - каждый последующий запущенный на одном физическом хосте гипервизор системы управления виртуализацией будет отжирать ресурсы физического хоста для своей работы. Как следствие - меньше ресурсов будет доступно самим ВМ. Также возможны проблемы со стабильностью работы хостовой ОС из-за наличия одновременно установленных разных систем управления виртуализацией. Чтобы избежать эти риски, нужно для отдельного физического хоста выбирать только одну систему управления виртуализацией (гипервизор) исходя из конкретных требований к ВМ. Естественно, если есть выбор, то лучше никогда не применять гетерогенные среды виртуализации на одном физическом хосте! Даже на разных физических хостах лучше стараться не применять различные системы управления виртуализацией (гипервизоры) из соображений того, что при физическом отказе одного из хостов Вы не сможете оперативно перевести все его ВМ на другой хост, т.к. нужна будет конвертация ВМ для другого гипервизора.  